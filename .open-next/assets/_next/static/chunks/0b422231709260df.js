(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73375,63059,e=>{"use strict";let a=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>a],73375);var s=e.i(46349);e.s(["ChevronRight",()=>s.default],63059)},10980,e=>{"use strict";let a=(0,e.i(75254).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>a],10980)},7934,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(10980),l=e.i(73375),r=e.i(63059);let i=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var n=e.i(46696),o=e.i(56902),c=e.i(87167),d=e.i(43555),m=e.i(99411),h=e.i(7095);function u(){let[e,u]=(0,s.useState)([]),[x,p]=(0,s.useState)(!0),[g,j]=(0,s.useState)({page:1,total:0,totalPages:1}),[f,b]=(0,s.useState)("all"),[v,k]=(0,s.useState)(!1),y=(0,s.useCallback)(async(e=1)=>{try{let a=new URLSearchParams({page:String(e)});"all"!==f&&a.set("status",f);let s=await fetch(`/api/bookings/all?${a}`),t=await s.json();if(!s.ok)throw Error(t.error);u(t.bookings||[]),j(t.pagination||{page:1,total:0,totalPages:1})}catch(e){n.toast.error(e?.message||"Failed to load bookings")}finally{p(!1)}},[f]);async function N(){k(!0);try{let e=new URLSearchParams;"all"!==f&&e.set("status",f),e.set("export","true");let a=await fetch(`/api/bookings/all?${e}`),s=await a.json();if(!a.ok)throw Error(s.error);let t=(s.bookings||[]).map(e=>[e.id,e.status,e.classroom_name||"",e.group_name||"",e.teacher_name||"",e.slot_date||"",e.time_slot_label||"",e.session_name||"",e.user_email||"",e.user_name||"",e.created_at||"",e.updated_at||""]),l=["ID,Status,Classroom,Room Group,Teacher Name,Date,Time Slot,Session,User Email,User Name,Created At,Updated At",...t.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n"),r=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(r);i.href=o,i.download=`bookings_${f}_${new Date().toISOString().split("T")[0]}.csv`,i.click(),URL.revokeObjectURL(o),n.toast.success("CSV exported successfully")}catch(e){n.toast.error(e?.message||"Failed to export CSV")}finally{k(!1)}}return((0,s.useEffect)(()=>{p(!0),y(1)},[y]),x&&0===e.length)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d.Skeleton,{className:"h-7 w-40"}),(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsx)("div",{className:"space-y-2 p-4",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(d.Skeleton,{className:"h-8 w-full"},s))})})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold font-[var(--font-display)]",children:"All Bookings"}),(0,a.jsx)(c.Badge,{variant:"secondary",children:g.total})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Review all campus bookings"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(h.Select,{value:f,onValueChange:b,children:[(0,a.jsx)(h.SelectTrigger,{className:"w-40",children:(0,a.jsx)(h.SelectValue,{placeholder:"All Status"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(h.SelectItem,{value:"pending",children:"Pending"}),(0,a.jsx)(h.SelectItem,{value:"approved",children:"Approved"}),(0,a.jsx)(h.SelectItem,{value:"rejected",children:"Rejected"})]})]}),(0,a.jsxs)(o.Button,{onClick:N,variant:"outline",disabled:v||0===e.length,children:[(0,a.jsx)(i,{className:"mr-2 h-4 w-4"}),v?"Exporting...":"Export CSV"]})]}),0===e.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border py-12 text-center",children:[(0,a.jsx)(t.BookOpen,{className:"h-8 w-8 text-muted-foreground"}),(0,a.jsx)("p",{className:"font-medium",children:"No bookings found"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsxs)(m.Table,{children:[(0,a.jsx)(m.TableHeader,{children:(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableHead,{children:"Date"}),(0,a.jsx)(m.TableHead,{children:"Time"}),(0,a.jsx)(m.TableHead,{children:"Classroom"}),(0,a.jsx)(m.TableHead,{children:"Booked By"}),(0,a.jsx)(m.TableHead,{children:"Purpose"}),(0,a.jsx)(m.TableHead,{children:"Status"})]})}),(0,a.jsx)(m.TableBody,{children:e.map(e=>(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableCell,{className:"font-medium",children:e.booking_date}),(0,a.jsxs)(m.TableCell,{className:"text-muted-foreground",children:[e.start_time," - ",e.end_time]}),(0,a.jsx)(m.TableCell,{children:e.classroom_name}),(0,a.jsx)(m.TableCell,{children:e.user_name||e.user_email||"—"}),(0,a.jsx)(m.TableCell,{className:e.purpose?"":"text-muted-foreground",children:e.purpose||"—"}),(0,a.jsx)(m.TableCell,{children:(0,a.jsx)(c.Badge,{variant:"approved"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"capitalize",children:e.status})})]},e.id))})]})}),g.totalPages>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Page ",g.page," of ",g.totalPages," (",g.total," bookings)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.Button,{variant:"outline",size:"sm",disabled:g.page<=1,onClick:()=>y(g.page-1),children:[(0,a.jsx)(l.ChevronLeft,{className:"mr-1 h-4 w-4"}),"Previous"]}),(0,a.jsxs)(o.Button,{variant:"outline",size:"sm",disabled:g.page>=g.totalPages,onClick:()=>y(g.page+1),children:["Next",(0,a.jsx)(r.ChevronRight,{className:"ml-1 h-4 w-4"})]})]})]})]})]})}e.s(["default",()=>u],7934)}]);