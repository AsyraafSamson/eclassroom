(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87167,99411,e=>{"use strict";var t=e.i(43476);e.i(71645);var a=e.i(25913),s=e.i(91918),r=e.i(80064);let l=(0,a.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a="default",asChild:n=!1,...d}){let i=n?s.Slot.Root:"span";return(0,t.jsx)(i,{"data-slot":"badge","data-variant":a,className:(0,r.cn)(l({variant:a}),e),...d})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...a})})}function i({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...a})}function o({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...a})}function c({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function x({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function h({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function u({className:e,...a}){return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,r.cn)("text-muted-foreground mt-4 text-sm",e),...a})}e.s(["Badge",()=>n],87167),e.s(["Table",()=>d,"TableBody",()=>o,"TableCaption",()=>u,"TableCell",()=>h,"TableHead",()=>x,"TableHeader",()=>i,"TableRow",()=>c],99411)},18670,e=>{"use strict";var t=e.i(43476);e.i(71645);var a=e.i(80064);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>l])},61911,e=>{"use strict";let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},10980,e=>{"use strict";let t=(0,e.i(75254).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],10980)},16272,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let s=(0,e.i(75254).default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var r=e.i(61911),l=e.i(63544),n=e.i(10980),d=e.i(46696),i=e.i(87167),o=e.i(43555),c=e.i(18670),x=e.i(99411);function h({title:e,value:a,description:s,icon:r}){return(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(c.CardDescription,{children:e}),(0,t.jsx)(r,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:a}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:s})]})]})}function u({data:e,labelKey:a,valueKey:s,maxValue:r}){if(!e||0===e.length)return(0,t.jsx)("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No data yet"});let l=r||Math.max(...e.map(e=>e[s]),1);return(0,t.jsx)("div",{className:"space-y-2",children:e.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-28 truncate text-sm text-muted-foreground",children:e[a]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"h-6 rounded bg-primary/20 transition-all",style:{width:`${Math.max(e[s]/l*100,4)}%`},children:(0,t.jsx)("span",{className:"flex h-full items-center px-2 text-xs font-medium text-primary",children:e[s]})})})]},r))})}function m(){let[e,m]=(0,a.useState)(null),[j,p]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{fetch("/api/stats").then(e=>e.json()).then(e=>m(e.stats||null)).catch(()=>d.toast.error("Failed to load statistics")).finally(()=>p(!1))},[]),j)return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(o.Skeleton,{className:"h-7 w-40"}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(o.Skeleton,{className:"h-28"}),(0,t.jsx)(o.Skeleton,{className:"h-28"}),(0,t.jsx)(o.Skeleton,{className:"h-28"})]}),(0,t.jsx)(o.Skeleton,{className:"h-64"})]});if(!e)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-center",children:[(0,t.jsx)(s,{className:"h-10 w-10 text-muted-foreground"}),(0,t.jsx)("p",{className:"font-medium",children:"Unable to load statistics"})]});let b=e.statusBreakdown.find(e=>"approved"===e.status)?.count||0,g=e.statusBreakdown.find(e=>"pending"===e.status)?.count||0,f=e.statusBreakdown.find(e=>"rejected"===e.status)?.count||0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold font-[var(--font-display)]",children:"Statistics"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analyze usage patterns and booking demand across campus"})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(h,{title:"Total Bookings",value:e.totalBookings,description:"All time",icon:n.BookOpen}),(0,t.jsx)(h,{title:"Total Users",value:e.totalUsers,description:"Registered accounts",icon:r.Users}),(0,t.jsx)(h,{title:"Total Classrooms",value:e.totalClassrooms,description:"Managed rooms",icon:l.School})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardHeader,{className:"pb-2",children:[(0,t.jsx)(c.CardDescription,{children:"Approved"}),(0,t.jsx)(c.CardTitle,{className:"text-2xl text-emerald-600",children:b})]})}),(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardHeader,{className:"pb-2",children:[(0,t.jsx)(c.CardDescription,{children:"Pending"}),(0,t.jsx)(c.CardTitle,{className:"text-2xl text-amber-600",children:g})]})}),(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardHeader,{className:"pb-2",children:[(0,t.jsx)(c.CardDescription,{children:"Rejected"}),(0,t.jsx)(c.CardTitle,{className:"text-2xl text-rose-600",children:f})]})})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{className:"text-base",children:"Monthly Bookings"}),(0,t.jsx)(c.CardDescription,{children:"Last 12 months"})]}),(0,t.jsx)(c.CardContent,{children:(0,t.jsx)(u,{data:e.monthlyBookings,labelKey:"month",valueKey:"count"})})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{className:"text-base",children:"Most Booked Rooms"}),(0,t.jsx)(c.CardDescription,{children:"Top 10 classrooms"})]}),(0,t.jsx)(c.CardContent,{children:0===e.topRooms.length?(0,t.jsx)("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No bookings yet"}):(0,t.jsxs)(x.Table,{children:[(0,t.jsx)(x.TableHeader,{children:(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableHead,{children:"Classroom"}),(0,t.jsx)(x.TableHead,{className:"text-right",children:"Bookings"})]})}),(0,t.jsx)(x.TableBody,{children:e.topRooms.map((e,a)=>(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(x.TableCell,{className:"text-right",children:(0,t.jsx)(i.Badge,{variant:"secondary",children:e.booking_count})})]},a))})]})})]}),(0,t.jsxs)(c.Card,{className:"lg:col-span-2",children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{className:"text-base",children:"Most Active Users"}),(0,t.jsx)(c.CardDescription,{children:"Top 10 by booking count"})]}),(0,t.jsx)(c.CardContent,{children:0===e.topUsers.length?(0,t.jsx)("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No bookings yet"}):(0,t.jsxs)(x.Table,{children:[(0,t.jsx)(x.TableHeader,{children:(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableHead,{children:"User"}),(0,t.jsx)(x.TableHead,{children:"Email"}),(0,t.jsx)(x.TableHead,{className:"text-right",children:"Bookings"})]})}),(0,t.jsx)(x.TableBody,{children:e.topUsers.map((e,a)=>(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableCell,{className:"font-medium",children:e.full_name||"â€”"}),(0,t.jsx)(x.TableCell,{className:"text-muted-foreground",children:e.email}),(0,t.jsx)(x.TableCell,{className:"text-right",children:(0,t.jsx)(i.Badge,{variant:"secondary",children:e.booking_count})})]},a))})]})})]})]})]})}e.s(["default",()=>m],16272)}]);