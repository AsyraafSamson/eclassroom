(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87167,99411,e=>{"use strict";var a=e.i(43476);e.i(71645);var t=e.i(25913),s=e.i(91918),r=e.i(80064);let l=(0,t.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t="default",asChild:o=!1,...i}){let n=o?s.Slot.Root:"span";return(0,a.jsx)(n,{"data-slot":"badge","data-variant":t,className:(0,r.cn)(l({variant:t}),e),...i})}function i({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...t})})}function n({className:e,...t}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...t})}function d({className:e,...t}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...t})}function c({className:e,...t}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function u({className:e,...t}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function x({className:e,...t}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function m({className:e,...t}){return(0,a.jsx)("caption",{"data-slot":"table-caption",className:(0,r.cn)("text-muted-foreground mt-4 text-sm",e),...t})}e.s(["Badge",()=>o],87167),e.s(["Table",()=>i,"TableBody",()=>d,"TableCaption",()=>m,"TableCell",()=>x,"TableHead",()=>u,"TableHeader",()=>n,"TableRow",()=>c],99411)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},18670,e=>{"use strict";var a=e.i(43476);e.i(71645);var t=e.i(80064);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function o({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>i,"CardDescription",()=>o,"CardHeader",()=>r,"CardTitle",()=>l])},89853,e=>{"use strict";let a=(0,e.i(75254).default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["CalendarDays",()=>a],89853)},9237,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(30030),r=e.i(20783),l=e.i(26999),o=e.i(81140),i=e.i(91918),n="AlertDialog",[d,c]=(0,s.createContextScope)(n,[l.createDialogScope]),u=(0,l.createDialogScope)(),x=e=>{let{__scopeAlertDialog:t,...s}=e,r=u(t);return(0,a.jsx)(l.Root,{...r,...s,modal:!0})};x.displayName=n,t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,o=u(s);return(0,a.jsx)(l.Trigger,{...o,...r,ref:t})}).displayName="AlertDialogTrigger";var m=e=>{let{__scopeAlertDialog:t,...s}=e,r=u(t);return(0,a.jsx)(l.Portal,{...r,...s})};m.displayName="AlertDialogPortal";var h=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,o=u(s);return(0,a.jsx)(l.Overlay,{...o,...r,ref:t})});h.displayName="AlertDialogOverlay";var g="AlertDialogContent",[f,p]=d(g),b=(0,i.createSlottable)("AlertDialogContent"),j=t.forwardRef((e,s)=>{let{__scopeAlertDialog:i,children:n,...d}=e,c=u(i),x=t.useRef(null),m=(0,r.useComposedRefs)(s,x),h=t.useRef(null);return(0,a.jsx)(l.WarningProvider,{contentName:g,titleName:v,docsSlug:"alert-dialog",children:(0,a.jsx)(f,{scope:i,cancelRef:h,children:(0,a.jsxs)(l.Content,{role:"alertdialog",...c,...d,ref:m,onOpenAutoFocus:(0,o.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(b,{children:n}),(0,a.jsx)(D,{contentRef:x})]})})})});j.displayName=g;var v="AlertDialogTitle",y=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,o=u(s);return(0,a.jsx)(l.Title,{...o,...r,ref:t})});y.displayName=v;var N="AlertDialogDescription",C=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,o=u(s);return(0,a.jsx)(l.Description,{...o,...r,ref:t})});C.displayName=N;var k=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,o=u(s);return(0,a.jsx)(l.Close,{...o,...r,ref:t})});k.displayName="AlertDialogAction";var w="AlertDialogCancel",T=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...o}=e,{cancelRef:i}=p(w,s),n=u(s),d=(0,r.useComposedRefs)(t,i);return(0,a.jsx)(l.Close,{...n,...o,ref:d})});T.displayName=w;var D=({contentRef:e})=>{let a=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${N}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return t.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},A=e.i(80064);let R=({...e})=>(0,a.jsx)(x,{"data-slot":"alert-dialog",...e}),H=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(h,{"data-slot":"alert-dialog-overlay",className:(0,A.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));H.displayName="AlertDialogOverlay";let S=t.forwardRef(({className:e,...t},s)=>(0,a.jsxs)(m,{children:[(0,a.jsx)(H,{}),(0,a.jsx)(j,{"data-slot":"alert-dialog-content",ref:s,className:(0,A.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));S.displayName="AlertDialogContent";let B=({className:e,...t})=>(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,A.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});B.displayName="AlertDialogHeader";let M=({className:e,...t})=>(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,A.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});M.displayName="AlertDialogFooter";let _=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(y,{"data-slot":"alert-dialog-title",ref:s,className:(0,A.cn)("text-lg font-semibold",e),...t}));_.displayName="AlertDialogTitle";let z=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(C,{"data-slot":"alert-dialog-description",ref:s,className:(0,A.cn)("text-sm text-muted-foreground",e),...t}));z.displayName="AlertDialogDescription";let O=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(k,{"data-slot":"alert-dialog-action",ref:s,className:(0,A.cn)("inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));O.displayName="AlertDialogAction";let F=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(T,{"data-slot":"alert-dialog-cancel",ref:s,className:(0,A.cn)("mt-2 inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-semibold ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 sm:mt-0",e),...t}));F.displayName="AlertDialogCancel",e.s(["AlertDialog",()=>R,"AlertDialogAction",()=>O,"AlertDialogCancel",()=>F,"AlertDialogContent",()=>S,"AlertDialogDescription",()=>z,"AlertDialogFooter",()=>M,"AlertDialogHeader",()=>B,"AlertDialogTitle",()=>_],9237)},23934,e=>{"use strict";let a=(0,e.i(75254).default)("clock-3",[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock3",()=>a],23934)},43537,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(22016),r=e.i(89853),l=e.i(63544),o=e.i(23934),i=e.i(27612),n=e.i(46696),d=e.i(56902),c=e.i(87167),u=e.i(43555),x=e.i(18670),m=e.i(99411),h=e.i(9237);function g(){let[e,g]=(0,t.useState)(null),[f,p]=(0,t.useState)([]),[b,j]=(0,t.useState)(!0),[v,y]=(0,t.useState)(!1),[N,C]=(0,t.useState)(null),[k,w]=(0,t.useState)(!1);async function T(){try{let[e,a]=await Promise.all([fetch("/api/auth/me").then(e=>e.json()),fetch("/api/bookings/my").then(e=>e.json())]);g(e.user||null),p(a.bookings||[])}catch{n.toast.error("Failed to load dashboard")}finally{j(!1)}}async function D(){if(N){w(!0);try{let e=await fetch(`/api/bookings/${N.id}`,{method:"DELETE"}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to cancel booking");p(e=>e.filter(e=>e.id!==N.id)),n.toast.success("Booking cancelled successfully"),y(!1)}catch(e){n.toast.error(e?.message||"Failed to cancel booking")}finally{w(!1)}}}(0,t.useEffect)(()=>{T()},[]);let A=new Date().toISOString().slice(0,10),R=f.filter(e=>e.booking_date>=A),H=f.filter(e=>e.booking_date<A);return b?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u.Skeleton,{className:"h-10 w-64"}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsx)(u.Skeleton,{className:"h-28"}),(0,a.jsx)(u.Skeleton,{className:"h-28"}),(0,a.jsx)(u.Skeleton,{className:"h-28"})]}),(0,a.jsx)(u.Skeleton,{className:"h-64 w-full"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"My Dashboard"}),(0,a.jsxs)("h2",{className:"text-3xl font-semibold tracking-tight text-foreground md:text-4xl font-[var(--font-display)]",children:["Hello, ",e?.name||e?.email||"User"]}),(0,a.jsx)("p",{className:"max-w-2xl text-sm text-muted-foreground",children:"Review your bookings and plan your next classroom reservation."})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{className:"pb-2",children:[(0,a.jsx)(x.CardDescription,{children:"Total Bookings"}),(0,a.jsx)(x.CardTitle,{className:"text-3xl",children:f.length})]}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time"})})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{className:"pb-2",children:[(0,a.jsx)(x.CardDescription,{children:"Upcoming"}),(0,a.jsx)(x.CardTitle,{className:"text-3xl",children:R.length})]}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"From today onwards"})})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(x.CardHeader,{className:"pb-2",children:(0,a.jsx)(x.CardDescription,{children:"Quick Actions"})}),(0,a.jsxs)(x.CardContent,{className:"flex flex-col gap-2",children:[(0,a.jsx)(d.Button,{asChild:!0,size:"sm",children:(0,a.jsx)(s.default,{href:"/dashboard/classrooms",children:"Book a Room"})}),(0,a.jsx)(d.Button,{asChild:!0,size:"sm",variant:"outline",children:(0,a.jsx)(s.default,{href:"/dashboard/calendar",children:"View Calendar"})})]})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(x.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.CalendarDays,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)(x.CardTitle,{className:"text-lg",children:"Upcoming Bookings"})]})}),(0,a.jsx)(x.CardContent,{children:0===R.length?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 py-8 text-center",children:[(0,a.jsx)(l.School,{className:"h-8 w-8 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No upcoming bookings"}),(0,a.jsx)(d.Button,{asChild:!0,size:"sm",variant:"outline",className:"mt-2",children:(0,a.jsx)(s.default,{href:"/dashboard/classrooms",children:"Make a booking"})})]}):(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsxs)(m.Table,{children:[(0,a.jsx)(m.TableHeader,{children:(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableHead,{children:"Date"}),(0,a.jsx)(m.TableHead,{children:"Time"}),(0,a.jsx)(m.TableHead,{children:"Classroom"}),(0,a.jsx)(m.TableHead,{children:"Purpose"}),(0,a.jsx)(m.TableHead,{children:"Status"}),(0,a.jsx)(m.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,a.jsx)(m.TableBody,{children:R.slice(0,10).map(e=>(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableCell,{className:"font-medium",children:e.booking_date}),(0,a.jsxs)(m.TableCell,{className:"text-muted-foreground",children:[e.start_time," - ",e.end_time]}),(0,a.jsx)(m.TableCell,{children:e.classroom_name}),(0,a.jsx)(m.TableCell,{className:e.purpose?"":"text-muted-foreground",children:e.purpose||"â€”"}),(0,a.jsx)(m.TableCell,{children:(0,a.jsx)(c.Badge,{variant:"approved"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"capitalize",children:e.status})}),(0,a.jsx)(m.TableCell,{children:(0,a.jsx)(d.Button,{size:"sm",variant:"ghost",className:"h-8 text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:()=>{C(e),y(!0)},children:(0,a.jsx)(i.Trash2,{className:"h-3.5 w-3.5"})})})]},e.id))})]})})})]}),H.length>0&&(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(x.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Clock3,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)(x.CardTitle,{className:"text-lg",children:"Past Bookings"}),(0,a.jsx)(c.Badge,{variant:"secondary",children:H.length})]})}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsxs)(m.Table,{children:[(0,a.jsx)(m.TableHeader,{children:(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableHead,{children:"Date"}),(0,a.jsx)(m.TableHead,{children:"Time"}),(0,a.jsx)(m.TableHead,{children:"Classroom"}),(0,a.jsx)(m.TableHead,{children:"Status"})]})}),(0,a.jsx)(m.TableBody,{children:H.slice(0,10).map(e=>(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableCell,{className:"font-medium",children:e.booking_date}),(0,a.jsxs)(m.TableCell,{className:"text-muted-foreground",children:[e.start_time," - ",e.end_time]}),(0,a.jsx)(m.TableCell,{children:e.classroom_name}),(0,a.jsx)(m.TableCell,{children:(0,a.jsx)(c.Badge,{variant:"secondary",className:"capitalize",children:e.status})})]},e.id))})]})})})]}),(0,a.jsx)(h.AlertDialog,{open:v,onOpenChange:y,children:(0,a.jsxs)(h.AlertDialogContent,{children:[(0,a.jsxs)(h.AlertDialogHeader,{children:[(0,a.jsx)(h.AlertDialogTitle,{children:"Cancel Booking"}),(0,a.jsxs)(h.AlertDialogDescription,{children:["Are you sure you want to cancel your booking for"," ",(0,a.jsx)("span",{className:"font-semibold",children:N?.classroom_name})," on"," ",(0,a.jsx)("span",{className:"font-semibold",children:N?.booking_date}),"? This action cannot be undone."]})]}),(0,a.jsxs)(h.AlertDialogFooter,{children:[(0,a.jsx)(h.AlertDialogCancel,{children:"Keep Booking"}),(0,a.jsx)(h.AlertDialogAction,{onClick:D,disabled:k,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:k?"Cancelling...":"Cancel Booking"})]})]})})]})}e.s(["default",()=>g])}]);