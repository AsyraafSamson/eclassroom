module.exports=[9020,34450,a=>{"use strict";var b=a.i(87924);a.i(72131);var c=a.i(187),d=a.i(11011),e=a.i(97630);let f=(0,c.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function g({className:a,variant:c="default",asChild:g=!1,...h}){let i=g?d.Slot.Root:"span";return(0,b.jsx)(i,{"data-slot":"badge","data-variant":c,className:(0,e.cn)(f({variant:c}),a),...h})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,e.cn)("w-full caption-bottom text-sm",a),...c})})}function i({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,e.cn)("[&_tr]:border-b",a),...c})}function j({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,e.cn)("[&_tr:last-child]:border-0",a),...c})}function k({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,e.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function l({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,e.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function m({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,e.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function n({className:a,...c}){return(0,b.jsx)("caption",{"data-slot":"table-caption",className:(0,e.cn)("text-muted-foreground mt-4 text-sm",a),...c})}a.s(["Badge",()=>g],9020),a.s(["Table",()=>h,"TableBody",()=>j,"TableCaption",()=>n,"TableCell",()=>m,"TableHead",()=>l,"TableHeader",()=>i,"TableRow",()=>k],34450)},13749,50522,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749);var c=a.i(11989);a.s(["ChevronRight",()=>c.default],50522)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],53722)},39780,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(53722),e=a.i(13749),f=a.i(50522);let g=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var h=a.i(23292),i=a.i(49881),j=a.i(9020),k=a.i(62668),l=a.i(34450),m=a.i(97074);function n(){let[a,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)({page:1,total:0,totalPages:1}),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(!1),w=(0,c.useCallback)(async(a=1)=>{try{let b=new URLSearchParams({page:String(a)});"all"!==s&&b.set("status",s);let c=await fetch(`/api/bookings/all?${b}`),d=await c.json();if(!c.ok)throw Error(d.error);n(d.bookings||[]),r(d.pagination||{page:1,total:0,totalPages:1})}catch(a){h.toast.error(a?.message||"Failed to load bookings")}finally{p(!1)}},[s]);async function x(){v(!0);try{let a=new URLSearchParams;"all"!==s&&a.set("status",s),a.set("export","true");let b=await fetch(`/api/bookings/all?${a}`),c=await b.json();if(!b.ok)throw Error(c.error);let d=(c.bookings||[]).map(a=>[a.id,a.status,a.classroom_name||"",a.group_name||"",a.teacher_name||"",a.slot_date||"",a.time_slot_label||"",a.session_name||"",a.user_email||"",a.user_name||"",a.created_at||"",a.updated_at||""]),e=["ID,Status,Classroom,Room Group,Teacher Name,Date,Time Slot,Session,User Email,User Name,Created At,Updated At",...d.map(a=>a.map(a=>`"${String(a).replace(/"/g,'""')}"`).join(","))].join("\n"),f=new Blob([e],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),i=URL.createObjectURL(f);g.href=i,g.download=`bookings_${s}_${new Date().toISOString().split("T")[0]}.csv`,g.click(),URL.revokeObjectURL(i),h.toast.success("CSV exported successfully")}catch(a){h.toast.error(a?.message||"Failed to export CSV")}finally{v(!1)}}return((0,c.useEffect)(()=>{p(!0),w(1)},[w]),o&&0===a.length)?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(k.Skeleton,{className:"h-7 w-40"}),(0,b.jsx)("div",{className:"rounded-lg border",children:(0,b.jsx)("div",{className:"space-y-2 p-4",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)(k.Skeleton,{className:"h-8 w-full"},c))})})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold font-[var(--font-display)]",children:"All Bookings"}),(0,b.jsx)(j.Badge,{variant:"secondary",children:q.total})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Review all campus bookings"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(m.Select,{value:s,onValueChange:t,children:[(0,b.jsx)(m.SelectTrigger,{className:"w-40",children:(0,b.jsx)(m.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(m.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(m.SelectItem,{value:"approved",children:"Approved"}),(0,b.jsx)(m.SelectItem,{value:"rejected",children:"Rejected"})]})]}),(0,b.jsxs)(i.Button,{onClick:x,variant:"outline",disabled:u||0===a.length,children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),u?"Exporting...":"Export CSV"]})]}),0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border py-12 text-center",children:[(0,b.jsx)(d.BookOpen,{className:"h-8 w-8 text-muted-foreground"}),(0,b.jsx)("p",{className:"font-medium",children:"No bookings found"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"rounded-lg border",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Date"}),(0,b.jsx)(l.TableHead,{children:"Time"}),(0,b.jsx)(l.TableHead,{children:"Classroom"}),(0,b.jsx)(l.TableHead,{children:"Booked By"}),(0,b.jsx)(l.TableHead,{children:"Purpose"}),(0,b.jsx)(l.TableHead,{children:"Status"})]})}),(0,b.jsx)(l.TableBody,{children:a.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{className:"font-medium",children:a.booking_date}),(0,b.jsxs)(l.TableCell,{className:"text-muted-foreground",children:[a.start_time," - ",a.end_time]}),(0,b.jsx)(l.TableCell,{children:a.classroom_name}),(0,b.jsx)(l.TableCell,{children:a.user_name||a.user_email||"—"}),(0,b.jsx)(l.TableCell,{className:a.purpose?"":"text-muted-foreground",children:a.purpose||"—"}),(0,b.jsx)(l.TableCell,{children:(0,b.jsx)(j.Badge,{variant:"approved"===a.status?"default":"pending"===a.status?"secondary":"destructive",className:"capitalize",children:a.status})})]},a.id))})]})}),q.totalPages>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Page ",q.page," of ",q.totalPages," (",q.total," bookings)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",disabled:q.page<=1,onClick:()=>w(q.page-1),children:[(0,b.jsx)(e.ChevronLeft,{className:"mr-1 h-4 w-4"}),"Previous"]}),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",disabled:q.page>=q.totalPages,onClick:()=>w(q.page+1),children:["Next",(0,b.jsx)(f.ChevronRight,{className:"ml-1 h-4 w-4"})]})]})]})]})]})}a.s(["default",()=>n],39780)}];

//# sourceMappingURL=_2451f865._.js.map